{% extends "layouts/admin_layout.html" %}

{% block admin_content %}
<!-- Welcome Section -->
<div class="mb-4">
    <h1 class="mb-2" style="font-size: clamp(1.5rem, 5vw, 2rem); font-weight: bold;">Bienvenido al Sistema de Gestión de Docentes</h1>
    <p class="text-muted" style="font-size: clamp(0.875rem, 2vw, 1rem);">Administra la información académica y profesional de los docentes de UTTEC</p>
</div>

<!-- Summary Cards -->
<div class="row g-3 mb-4">
    <div class="col-6 col-lg-3">
        <div class="summary-card h-100">
            <div class="summary-card-icon" style="background-color: #0d6efd;">
                <i class="bi bi-people text-white" style="font-size: 20px;"></i>
            </div>
            <h6 class="mb-1">Total Docentes</h6>
            <h3 class="mb-0">{{ total_docentes }}</h3>
        </div>
    </div>
    <div class="col-6 col-lg-3">
        <div class="summary-card h-100">
            <div class="summary-card-icon" style="background-color: #198754;">
                <i class="bi bi-file-text text-white" style="font-size: 20px;"></i>
            </div>
            <h6 class="mb-1">Artículos</h6>
            <h3 class="mb-0">{{ total_articulos }}</h3>
        </div>
    </div>
    <div class="col-6 col-lg-3">
        <div class="summary-card h-100">
            <div class="summary-card-icon" style="background-color: #6f42c1;">
                <i class="bi bi-book text-white" style="font-size: 20px;"></i>
            </div>
            <h6 class="mb-1">Cursos</h6>
            <h3 class="mb-0">{{ total_cursos or 0 }}</h3>
        </div>
    </div>
    <div class="col-6 col-lg-3">
        <div class="summary-card h-100">
            <div class="summary-card-icon" style="background-color: #fd7e14;">
                <i class="bi bi-briefcase text-white" style="font-size: 20px;"></i>
            </div>
            <h6 class="mb-1">Proyectos</h6>
            <h3 class="mb-0">{{ total_proyectos or 0 }}</h3>
        </div>
    </div>
</div>

<!-- Quick Search Section -->
<div class="search-section text-center" style="padding: clamp(20px, 5vw, 40px);">
    <div class="search-icon-large mb-3">
        <i class="bi bi-search" style="font-size: clamp(40px, 10vw, 60px); color: #0d6efd;"></i>
    </div>
    <h4 class="mb-2">Búsqueda Rápida</h4>
    <p class="text-muted mb-4" style="font-size: clamp(0.875rem, 2vw, 1rem);">Encuentra rápidamente a un docente para ver o editar su información</p>
    <a href="{{ url_for('admin.docentes') }}" class="btn btn-primary">Buscar Docente</a>
</div>

<!-- Bottom Section -->
<div class="row g-3 mt-3">
    <!-- Recent Teachers -->
    <div class="col-12 col-lg-6">
        <div class="recent-section h-100">
            <h5 class="mb-3">Docentes Recientes</h5>
            {% if docentes_recientes %}
                {% for docente in docentes_recientes %}
                <div class="recent-item flex-wrap">
                    <div class="user-avatar" style="width: 40px; height: 40px; margin-right: 12px; font-size: 14px; flex-shrink: 0;">
                        {{ docente.nombre_completo[0] if docente.nombre_completo else 'D' }}
                    </div>
                    <div class="flex-grow-1" style="min-width: 0;">
                        <div style="font-weight: bold; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ docente.nombre_completo }}</div>
                        {% if docente.formaciones.first() %}
                        <div style="font-size: 13px; color: #666; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ docente.formaciones.first().area_conocimiento or 'Sin área' }}</div>
                        {% else %}
                        <div style="font-size: 13px; color: #666;">Sin información académica</div>
                        {% endif %}
                    </div>
                    <a href="{{ url_for('admin.ver_docente', id=docente.id) }}" class="btn btn-sm btn-primary ms-2">Ver</a>
                </div>
                {% endfor %}
            {% else %}
                <p class="text-muted mb-0">No hay docentes registrados aún.</p>
            {% endif %}
        </div>
    </div>
    
    <!-- Recent Activity -->
    <div class="col-12 col-lg-6">
        <div class="recent-section h-100">
            <h5 class="mb-3">Actividad Reciente</h5>
            {% if actividades_recientes %}
                {% for actividad in actividades_recientes %}
                <div class="activity-item">
                    <div class="activity-bullet" style="background-color: {{ actividad.color or '#0d6efd' }};"></div>
                    <div class="flex-grow-1" style="min-width: 0;">
                        <div style="font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ actividad.titulo }}</div>
                        <div style="font-size: 13px; color: #666;">{{ actividad.docente }} - {{ actividad.fecha }}</div>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="activity-item">
                    <div class="activity-bullet" style="background-color: #0d6efd;"></div>
                    <div class="flex-grow-1">
                        <div style="font-weight: 500;">Nuevo artículo registrado</div>
                        <div style="font-size: 13px; color: #666;">Sistema - Hace 2 días</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-bullet" style="background-color: #198754;"></div>
                    <div class="flex-grow-1">
                        <div style="font-weight: 500;">Proyecto finalizado</div>
                        <div style="font-size: 13px; color: #666;">Sistema - Hace 5 días</div>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
    /* Responsive adjustments for admin dashboard */
    @media (max-width: 576px) {
        .summary-card {
            padding: 12px !important;
        }
        
        .summary-card h3 {
            font-size: 1.5rem;
        }
        
        .summary-card h6 {
            font-size: 0.8rem;
        }
        
        .summary-card-icon {
            width: 35px !important;
            height: 35px !important;
        }
        
        .summary-card-icon i {
            font-size: 16px !important;
        }
        
        .recent-section {
            padding: 15px !important;
        }
        
        .recent-item {
            padding: 12px 0;
        }
        
        .recent-item .user-avatar {
            width: 35px !important;
            height: 35px !important;
        }
    }
</style>
{% endblock %}
